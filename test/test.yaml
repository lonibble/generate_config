---
- name: config creation
  gather_facts: false
  hosts: localhost
  vars_files:
    - vars.yml

  tasks:
    - name: generate leaf config
      template: 
        src=test.j2
        dest={{ hostname }}.cfg
      delegate_to: localhost